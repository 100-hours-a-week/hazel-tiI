## 날짜: 2025-01-15

## 딥다이브 

### RDBMS의 한계 및 NoSQL을 사용하는 이유



<br>

## RDBMS의 한계

### 1. 스케일 아웃
- 일반적으로 RDBMS는 수직적 확장(스케일 업)을  사용함
- 하드웨어를 통해 성능을 높이는 방식 사용
- 수평적 확장(스케일 아웃) 즉, 여러 대의 서버로 데이터를 분산 저장 및 처리하는 데 한계가 있음

### 2. 반구조화된 데이터 처리
- 고정된 스키마를 요구하기 때문에 스키마 변경이 잦거나 반구조화된 데이터와 비구조화된 데이터 처리에 비효율적임

### 3. 대규모 데이터 처리의 성능 제한
- 대용량 데이터를 실시간으로 처리하는 작업에서 병목 현상이 발생할 수 있음

### 4. 데이터 관계의 복잡성
- JOIN 연산이나 관계형 데이터 모델링이 복잡해지면 성능이 저하될 수 있음

#### 스케일 업 / 스케일 아웃
![img_2.png](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fq3j8u%2FbtqY2tp8ubk%2FBurfT1wx2yduBupQqX6mEk%2Fimg.png)
- 스케일 업 : 기존의 서버를 더 좋은 H/W로 바꾸거나 CPU, RAM, DISK등을 증설하는 방법으로 애플리케이션을 수정할 필요가 없음
- 스케일 아웃 : 기존에 사용하던 서버 옆에 서버 하나를 더 추가해서 성능을 높이는 방법으로 Cloud 서버의 등장으로 Scale out 방식의 
서버 증설에 더 많은 관심을 가지게 됐지만 장비의 수가 늘어날 수록 관리가 어려움 

## **NoSQL이란?**
- RDBMS의 한계를 극복하기 위한 데이터 저장소의 새로운 형태
- 비관계형 데이터베이스의 총칭으로 관계형 데이터베이스가 아닌 데이터 저장 방식과 모델을 채택한 데이터 베이스 시스템
- 데이터 모델의 유연성 및 수평적 확장성이 목표


## **NoSQL의 특징**

### 1. 스키마 유연성
- Schema-less 구조로 사전에 고정된 데이터 스키마를 정의하지 않아도 됨
- 각 데이터 항목이 다른 필드와 데이터 타입을 가질 수 있음

### 2. 수평 확장성
- 데이터를 여러 서버에 분산하여 저장하고 처리하는 구조로, 서버를 추가해 성능을 확장하기 쉬움

### 3. 고가용성
- 복제 및 분산 저장을 통해 특정 서버에 장애가 발생해도 데이터 유실이나 서비스 중단이 발생하지 않음

### 4. 빠른 성능
- 관계 모델이 없기 때문에 JOIN 연산의 오버헤드가 없고 데이터 읽기/쓰기 성능이 뛰어남

### 5. 데이터 간 관계 없음
- 관계형 데이터베이스와 달리 데이터 간의 관계를 명시적으로 정의하지 않으며 대부분 JOIN 연산이 불가능하거나 제한적임 


## **NoSQL을 사용하는 이유**

![img.png](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FdnVwFc%2FbtrmlXt03NL%2F22db8AI2QB49X7th6glTy0%2Fimg.png)
- 유연성 : 스키마가 유동적이어서 데이터 구조 변경이 잦은 애플리케이션에 적합
- 확장성 : 스케일 아웃에 의한 여러 서버로의 수평적 확장이 용이
- 고성능 : 대규모 데이터 처리와 높은 동시성을 필요로 하는 애플리케이션에서 뛰어난 성능을 보임
- 가용성 : 여러 대의 백업 서버 구성이 가능하여 장애 발생 시에도 무중단 서비스가 가능


## **NoSQL을 사용하는 경우**

### **1. 유연한 데이터 구조**
- 데이터 구조가 자주 변경되거나 반구조화된 데이터를 처리할 때

### **2. 성능 우선 환경**
- 데이터 일관성보다 쓰기/읽기 성능이 중요한 실시간 애플리케이션

### **3. 수평 확장 필요**
- 데이터 샤딩이나 클러스터링을 통해 확장이 필요한 경우

### **4. 비정형 데이터 처리**
- JSON, XML, 로그 데이터, IoT 데이터 등 구조화되지 않은 데이터를 저장하고 분석할 때

### **5. 대규모 데이터 저장소**
- 페타바이트 이상의 방대한 데이터를 저장하고 관리해야 하는 경우


## **RDBMS vs NoSQL**

![image.png](https://www.scylladb.com/wp-content/uploads/differences-between-sql-databases-and-nosql-databases.png)

| 특성  | **RDBMS** | **NoSQL** |
| --- | --- | --- |
| 데이터 모델링 | 관계형 데이터 모델 | 비관계형 데이터 모델 |
| 스키마 | 고정된 스키마 | 유연한 스키마 |
| 쿼리 언어 | SQL | 다양한 API 및 언어별 쿼리 방식 지원 |
| 확장성  | 수직적 확장(스케일 업) | 수평적 확장(스케일 아웃) |
| 데이터 관계 | 강력한 데이터 간 관계 지원 | 데이터 간 관계를 명시적으로 정의하지 않음 |
| 트랜잭션 유형 | ACID | BASE |
| 성능  | 복잡한 관계를 처리할 때 성능 저하 | 대규모 읽기/쓰기 성능에 최적화 |
| 데이터 일관성 | 강력한 일관성 | 최종적 일관성  |

- ACID : 원자성(**A**tomicity), 일관성(**C**onsistency), 격리성(**I**solation), 지속성(**D**urability)
- BASE(Basically Available, Soft-state, Eventually consistent)
  - Basically Available : 항상 가용성을 보장 (네트워크 오류가 발생해도 시스템이 동작하며 일부 데이터는 불완전하거나 지연될 수 있음)
  - Soft-state : 시스템의 상태는 고정적이지 않고 시간이 지나면서 변경될 수 있음
  - 최종적 일관성(Eventually consistent) : 일정 시간이 지나면 모든 노드에서 동일한 데이터 확인 가능 → 시간이 지나면 데이터는 모든 
  노드에서 일관성을 갖추게 됨 (예시: A 사용자가 데이터를 업데이트했지만 B 사용자가 읽었을 때 변경 사항이 반영되지 않을 수 있음 
  시간이 지나면 B가 읽는 데이터도 일치하게 됨)



## **NoSQL의 단점**
1. **일관성 보장의 한계**
    - NoSQL은 BASE **모델**을 적용하기 때문에 데이터 일관성이 강하게 보장되지 않음
    - 강한 일관성이 요구되는 금융 서비스나 거래 시스템에서는 부적합
2. **관계형 데이터 처리의 비효율성**
    - 데이터 간의 관계를 정의하거나 JOIN 연산이 필요할 경우 성능이 저하되거나 구현이 복잡해짐
3. **표준화 부족**
    - NoSQL은 서로 다른 모델을 사용하기 때문에 쿼리 방식이 통일 되지 않음 
    - 따라서 이에 따른 학습 곡선이 커지고 데이터베이스 변경 시 많은 작업이 필요함


<br>

### QnA
- Q : 네트워크로 인해 강력한 일관성이 깨지는 경우는 없나요?
- A : 네트워크 문제로 인해 강력한 일관성이 깨질 가능성이 있습니다. <br>
CAP 이론에 따르면, 네트워크로 연결된 분산 데이터베이스 시스템은 일관성(Consistency), 가용성(Availability), 파티션 허용성(Partition Tolerance) 
세가지 특성 중 두 가지 특성만 만족할 수 있습니다. <br>
따라서 강력한 일관성을 유지하려면 네트워크 장애 발생 시 가용성을 포기해야 합니다. 
이를 통해 요청을 차단하거나 거부하여 시스템이 일관성을 유지하는 방향으로 작동하도록 합니다. <br>
예를 들어 강력한 일관성을 유지하는 시스템의 경우, 네트워크 문제로 인해 노드 간 데이터 전파가 지연되면 읽기/쓰기 요청을 차단합니다. 
이로 인해 가용성이 희생될 수 있습니다. <br>
반대로 가용성을 유지하는 시스템에서는 일부 노드가 최신 데이터가 아닌 오래된 데이터를 반환할 수 있으므로 강력한 일관성이 깨질 수 있습니다.



### 오늘의 회고
- 오늘은 RDBMS와 NoSQL의 장단점과 어떤 상황에서 적용하는 것이 효율적인지에 대해 딥다이브 해보는 시간을 가졌다. 
- 전반적으로 개념에 대한 이해가 잘 되어 질문을 받았을 때 답변을 할 수 있었지만 강력한 일관성에 대한 질문에 대해선 답변을 제대로 하지 못해 
따로 추가적인 공부를 진행하였다. 
- 추가 학습을 하면서 CAP 이론에 대해서도 공부할 수 있어 의미가 있는 시간이었고 이론 뿐만 아니라 실무적인 관점에서 생각해 볼 수 있어 유익했다. 



<br>


### [참고]
- https://wikidocs.net/190248
- https://aws.amazon.com/ko/nosql/
- https://velog.io/@chosj1526/NoSQL%EC%9D%B4%EB%9E%80
- https://www.mongodb.com/ko-kr/resources/basics/databases/nosql-explained
- https://sujl95.tistory.com/83
- https://www.scylladb.com/learn/nosql/nosql-vs-sql/ 
- https://kils-log-of-develop.tistory.com/596
- https://azderica.github.io/00-db-cap/


<br>